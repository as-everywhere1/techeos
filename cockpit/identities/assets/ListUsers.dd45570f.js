import{o as t,c as a,a as h,_ as k,r as v,L as U,b as m,F as y,d as S,e as s,f,t as x,u as C,g as L,h as _}from"./index.f675d030.js";import{r as z}from"./UserIcon.a19c68ec.js";function B(o,n){return t(),a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[h("path",{"fill-rule":"evenodd",d:"M10 1.944A11.954 11.954 0 012.166 5C2.056 5.649 2 6.319 2 7c0 5.225 3.34 9.67 8 11.317C14.66 16.67 18 12.225 18 7c0-.682-.057-1.35-.166-2.001A11.954 11.954 0 0110 1.944zM11 14a1 1 0 11-2 0 1 1 0 012 0zm0-7a1 1 0 10-2 0v3a1 1 0 102 0V7z","clip-rule":"evenodd"})])}function $(o,n){return t(),a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[h("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})])}function b(o,n){return t(),a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[h("path",{d:"M8 9a3 3 0 100-6 3 3 0 000 6zM8 11a6 6 0 016 6H2a6 6 0 016-6zM16 7a1 1 0 10-2 0v1h-1a1 1 0 100 2h1v1a1 1 0 102 0v-1h1a1 1 0 100-2h-1V7z"})])}const A={setup(){const o=v([]),n=v(0),g=async()=>{var i;n.value++;try{const l=(await cockpit.user()).name;o.value=(i=(await C(["getent","passwd"],{superuser:"try"}).promise()).stdout.split(`
`).map(c=>{if(/^\s*$/.test(c))return null;const d=c.split(":"),w=d[2],u=parseInt(w);if(u<1e3&&u!==0)return null;const e=d[0],p=d[4];return{user:e,name:p===""?e:p,currentLoggedIn:e===l,uid:u}}).filter(c=>c!==null))!=null?i:[]}catch(l){alert("Failed to get users: "+L(l))}finally{n.value--}},r=i=>{cockpit.location.go(`/users/${i}`)};return g(),{users:o,processing:n,openUser:r,addUser:()=>{cockpit.location.go("/new-user")}}},components:{UserIcon:z,UserAddIcon:b,StarIcon:$,ShieldExclamationIcon:B,LoadingSpinner:U}},M={class:"flex flex-row flex-wrap content-start gap-well p-well w-full"},V=["onClick"],E={class:"card-body flex flex-col items-center justify-center h-36 min-w-[10rem] relative"},N={class:"flex flex-col gap-0.5 absolute right-3 top-3"},F={title:"You"},j={title:"Administrator"},D={key:0,class:"whitespace-nowrap text-sm font-mono text-muted"},H={class:"card-body flex flex-col items-center justify-center h-36 min-w-[10rem]"},Y=s("div",null,"New User",-1);function q(o,n,g,r,I,i){const l=_("StarIcon"),c=_("ShieldExclamationIcon"),d=_("UserIcon"),w=_("UserAddIcon"),u=_("LoadingSpinner");return t(),m("div",M,[(t(!0),m(y,null,S(r.users,e=>{var p;return t(),m("button",{onClick:G=>r.openUser(e.user),class:"card"},[s("div",E,[s("div",N,[s("div",F,[e.currentLoggedIn?(t(),a(l,{key:0,class:"size-icon icon-default"})):f("",!0)]),s("div",j,[e.uid===0?(t(),a(c,{key:0,class:"size-icon icon-default"})):f("",!0)])]),h(d,{class:"w-20 h-20 icon-default shrink-0"}),s("div",null,x((p=e.name)!=null?p:e.user),1),e.user!==e.name?(t(),m("div",D,"("+x(e.user)+")",1)):f("",!0)])],8,V)}),256)),s("button",{onClick:n[0]||(n[0]=e=>r.addUser()),class:"card"},[s("div",H,[h(w,{class:"w-20 h-20 icon-default shrink-0"}),Y])]),r.processing?(t(),a(u,{key:0,class:"h-32 w-32 self-center"})):f("",!0)])}var O=k(A,[["render",q]]);export{O as default};
